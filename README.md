# swf2svg
Преобразует SWF файлы в SVG. Краткое описание формата можно посмотреть 
[здесь](FORMAT_REFERENCE.md).
Ошибки, возникающие во время работы, выводятся в стандартный поток, но не прекращают работу скрипта.

### Параметры:
- `--in` - путь к SWF файлу
- `--list` - путь к файлу со списком SWF файлов в отдельных строках
- `--dir` - путь к директории с SWF файлами
- `--out` - путь к директории для SVG файлов
- `--frame` - номер кадра для извлечения. Если номер не указан и в файле определено несколько кадров, будет создана
директория с именем файла, в которой будут сохранены изображения по кадрам.
- `--fonts` - путь к директории со шрифтами, полученными с помощью `extract_fonts`

### Пример использования
Преобразовать файл in/SZ08-10-5.rar без обработки, сохранить результат в директорию tmp с тем же именем:

`python3 swf2svg.py --in in/SZ08-10-5.rar --out tmp/`

### Проблемы
**1) Неполные шрифты**

При преобразовании может возникнуть ситуация, когда в шрифте, определённом в файле, недостаточно символов для вывода
строки, и файл не будет сконвертирован. Чтобы снизить вероятность этого, можно воспользоваться скриптом `extract_fonts`,
который извлечёт шрифты из указанных файлов. Их можно будет передать утилите `swf2svg` в параметре `--fonts`.

# extract_fonts
Извлекает шрифты из SWF файлов в указанную директорию.
Ошибки, возникающие во время работы скрипта, выводятся в стандартный поток, но не прекращают работу скрипта.

### Параметры:
- `--in` - путь к SWF файлу
- `--list` - путь к файлу со списком SWF файлов
- `--dir` - путь к директории с SWF файлами
- `--out` - путь к директории для извлечённых шрифтов

Шрифты хранятся в виде отдельных SVG файлов для каждого символа. Например, в `fonts/SimHei/65.svg` будет храниться 
векторное изображение символа `A` (код ascii - 65) шрифта SimHei.

# clean_svg
Удаляет мусор из схем: заголовки (только те, которые определены в текстовых тегах), стрелки, логотипы, рамки.

### Параметры:
- `--in` - путь к SVG файлу
- `--list` - путь к файлу со списком SVG файлов
- `--dir` - путь к директории с SVG файлами
- `--out` - путь к директории для очищенных SVG файлов


# Библиотека pyswf
Исходный код библиотеки pyswf: https://github.com/timknip/pyswf.
Изменения в данном форке:
- исправлено чтение сжатых файлов
- добавлено выравнивание по байтам после чтения матриц и прямоугольников, иначе теги читались неправильно
- улучшено определение разрешения SVG файла по содержимому
- поддержка 3-го питона (исправлено чтение строк, кодирование растровых изображений, сериализация в svg)
